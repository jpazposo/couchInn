<couchinn-header buttons="headerButtons"></couchinn-header>
<div class="heading">Deatalles de la publicacion</div>
<div class="container">
  <div ng-init = "lodgin.puntuacion = calcularPromedio(lodgin.puntuacion)"></div>
  <div ng-init = "lodgin.user.puntuacionHospedador = calcularPromedio(lodgin.user.puntuacionHospedador)"></div>
  <!--<div ng-init="preguntas = damePreguntas()"></div>-->
  <div class wrap style="padding-left:70px;padding-right:70px;">
    <ul style="list-style-type:none">
      <div layout-gt-sm="row">
        <li><b>Nombre : </b> {{ lodgin.nombre }}</li>
        <li><b>Puntuacion publicacion : </b> {{ lodgin.puntuacion }} </li>
      </div>
      <li><b>Descripcion : </b> {{ lodgin.descripcion }}</li>
      <div layout-gt-sm="row">
        <li><b>Capacidad Maxima : </b>{{ lodgin.capacidadMax }}</li>
        <li><b>Tipo de Hospedaje : </b>{{ lodgin.tipo.nombre }}</li>
      </div>
      <b>Direccion</b>
      <div layout-gt-sm="row">
        <li><b>Calle : </b>{{ lodgin.calle }}</li>
        <li><b>Numero : </b> {{ lodgin.numero }}</li>
        <li><b>Piso : </b>{{ lodgin.piso }}</li>
        <li><b>Departamento : </b>{{ lodgin.departamento }}</li>
      </div>
      <div layout-gt-sm="row">
        <li><b>Fecha Inicio : </b>{{ lodgin.fechaInicio | date : shortDate }}</li>
        <li><b>Fecha Fin : </b>{{ lodgin.fechaFin | date : shortDate }}</li>
      </div>
      <div layout-gt-sm="row">
        <li><b>Due√±o : </b>{{ lodgin.user.email }}</li>
        <li><b>Puntuacion hospedador : </b>{{ lodgin.user.puntuacionHospedador }}</li>
      </div>
    </ul>
    <li ng-repeat="pregunta in preguntas">
        <ul style="list-style-type:none">
            <li><b> Pregunta de :  {{ pregunta.owner }} </b></li>
            <li>{{ pregunta.pregunta }}</li>
          <div ng-if="((user.username==lodgin.user.username) && (!pregunta.respuesta))">

            <md-input-container>
              <label>Respuesta</label>
              <input type="text" required md-maxlength="100" ng-model="respuestas[$index]">
            </md-input-container>
            <md-button ng-click=mandarRespuesta(pregunta,$index)> Responder ahora</md-button>
          </div>
          <div ng-if="(pregunta.respuesta)">
            <li><b>Respuesta  </b></li>
            <li>{{ pregunta.respuesta }}</li>
          </div>
        </ul>
    </li>

    <div ng-if="(user.username!=lodgin.user.username)">
      <md-input-container class="md-block" flex-gt-sm>
        <label>Pregunta</label>
        <input ng-model="pregunta.pregunta">
      </md-input-container>
      <md-button ng-click="preguntar($index)" ng-disabled="!lodgin.preguntas"> Preguntar</md-button>
    </div>

 <!--   <div ng-if="((user.username==lodgin.user.username) && (!pregunta.respuesta))">
      <md-input-container class="md-block" flex-gt-sm>
        <label>Responder</label>
        <input ng-model="preguntas.respuesta">
      </md-input-container>
      <md-button ng-click="responder(preguntas.respuesta)" ng-disabled="!preguntas.respuesta"> Responder</md-button>
    </div>-->



  </div>
</div>


<h1>Solicitar Couch</h1>

<div>
  <md-content>
    <md-datepicker
      ng-model="application.fechaInicio"
      md-placeholder="fecha inicial"
      md-min-date="lodgin.fechaInicio"
      md-max-date="lodgin.fechaFin">
    </md-datepicker>
  </md-content>

  <md-content>
    <md-datepicker
      ng-model="application.fechaFin"
      md-placeholder="fecha final"
      md-min-date="application.fechaInicio"
      md-max-date="lodgin.fechaFin">
    </md-datepicker>
  </md-content>
</div>

<div ng-show="lodgin.fechasReservadas.length > 0">
  <h2>Fechas Ya reservadas</h2>
  <md-list>
    <md-list-item class="md-2-line" ng-repeat="item in lodgin.fechasReservadas">

      <div class="md-list-item-text">
        <p> Ocupado desde {{item.fechaInicio | date : shortDate}} hasta {{item.fechaFin | date : shortDate}}</p>
      </div>
    </md-list-item>
  </md-list>
</div>


<md-button ng-click="solicitar(lodgin.nombre)"> Solicitar Ahora</md-button>
